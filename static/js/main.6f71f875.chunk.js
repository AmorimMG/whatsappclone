(this.webpackJsonpwhatsappclone=this.webpackJsonpwhatsappclone||[]).push([[0],{48:function(e,t,a){},72:function(e,t,a){},86:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},96:function(e,t,a){},98:function(e,t,a){"use strict";a.r(t);var n=a(11),c=a.n(n),r=a(34),s=a.n(r),i=a(0),o=a.n(i),u=a(1),l=a(14),d=(a(72),a(48),a(18)),h=a(28),j=(a(73),a(65)),f=(a(99),h.a.initializeApp({apiKey:"AIzaSyAoeOCIge46KJZQtpueoOtmA3SY4cb6T2k",authDomain:"whatsappclone-78df4.firebaseapp.com",projectId:"whatsappclone-78df4",storageBucket:"whatsappclone-78df4.appspot.com",messagingSenderId:"355663109584",appId:"1:355663109584:web:0b272fabbc8caddc43edd5",measurementId:"G-NH8PPMKYEY"})),b=f.firestore(),p={fbPopup:function(){var e=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new h.a.auth.FacebookAuthProvider,e.next=3,f.auth().signInWithPopup(t);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),gitPopup:function(){var e=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new h.a.auth.GithubAuthProvider,e.next=3,f.auth().signInWithPopup(t);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),googlePopup:function(){var e=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new h.a.auth.GoogleAuthProvider,e.next=3,f.auth().signInWithPopup(t);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),twitterPopup:function(){var e=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new h.a.auth.TwitterAuthProvider,e.next=3,f.auth().signInWithPopup(t);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),YahooLogin:function(){var e=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new j.a("yahoo.com"),e.next=3,f.auth().signInWithPopup(t);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addUser:function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.collection("users").doc(t.id).set({name:t.name,avatar:t.avatar},{merge:!0});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getContactList:function(){var e=Object(u.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,b.collection("users").get();case 3:return e.sent.forEach((function(e){var n=e.data();e.id!==t&&a.push({id:e.id,name:n.name,avatar:n.avatar})})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),addNewChat:function(){var e=Object(u.a)(o.a.mark((function e(t,a){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.collection("chats").add({messages:[],users:[t.id,a.id]});case 2:n=e.sent,b.collection("users").doc(t.id).update({chats:h.a.firestore.FieldValue.arrayUnion({chatId:n.id,title:a.name,image:a.avatar,with:a.id})}),b.collection("users").doc(a.id).update({chats:h.a.firestore.FieldValue.arrayUnion({chatId:n.id,title:t.name,image:t.avatar,with:t.id})});case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),onChatList:function(e,t){return b.collection("users").doc(e).onSnapshot((function(e){if(e.exists){var a=e.data();if(a.chats){var n=Object(d.a)(a.chats);n.sort((function(e,t){return void 0===e.lastMessageDate||void 0===t.lastMessageDate?-1:e.lastMessageDate.seconds<t.lastMessageDate.seconds?1:-1})),t(n)}}}))},onChatContent:function(e,t,a){return b.collection("chats").doc(e).onSnapshot((function(e){if(e.exists){var n=e.data();t(n.messages),a(n.users)}}))},sendMessage:function(){var e=Object(u.a)(o.a.mark((function e(t,a,n,c,r,s){var i,u,l,j,f,p;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=new Date,b.collection("chats").doc(t.chatId).update({messages:h.a.firestore.FieldValue.arrayUnion({type:n,author:a,body:c,date:i})}),e.t0=o.a.keys(s);case 3:if((e.t1=e.t0()).done){e.next=16;break}return u=e.t1.value,e.next=7,b.collection("users").doc(s[u]).get();case 7:if(l=e.sent,!(j=l.data()).chats){e.next=14;break}for(p in f=Object(d.a)(j.chats))f[p].chatId===t.chatId&&(f[p].lastMessage=c,f[p].lastMessageDate=i);return e.next=14,b.collection("users").doc(s[u]).update({chats:f});case 14:e.next=3;break;case 16:case"end":return e.stop()}}),e)})));return function(t,a,n,c,r,s){return e.apply(this,arguments)}}()},m=a(27),v=a.n(m),O=(a(86),a(7)),x=function(e){var t=e.onClick,a=e.active,c=e.data,r=Object(n.useState)(""),s=Object(l.a)(r,2),i=s[0],o=s[1];return Object(n.useEffect)((function(){if(c.lastMessageDate>0){var e=new Date(1e3*c.lastMessageDate.seconds),t=e.getHours(),a=e.getMinutes();a=a<10?"0"+a:a,o("".concat(t=t<10?"0"+t:t,":").concat(a))}}),[c]),Object(O.jsxs)("div",{className:"chatListItem ".concat(a?"active":""),onClick:t,children:[Object(O.jsx)("img",{className:"chatListItem--avatar",src:c.image,alt:""}),Object(O.jsxs)("div",{className:"chatListItem--lines",children:[Object(O.jsxs)("div",{className:"chatListItem--line",children:[Object(O.jsx)("div",{className:"chatListItem--name",children:c.title}),Object(O.jsx)("div",{className:"chatListItem--date",children:i})]}),Object(O.jsx)("div",{className:"chatListItem--line",children:Object(O.jsx)("div",{className:"chatListItem--lastMsg",children:Object(O.jsx)("p",{children:c.lastMessage})})})]})]})},w=(a(88),a.p+"static/media/whatsapp-intro.7d4c7b31.png"),g=function(){return Object(O.jsxs)("div",{className:"chatIntro",children:[Object(O.jsx)("img",{src:w,alt:""}),Object(O.jsx)("h1",{children:"Mantenha seu celular conectado"}),Object(O.jsxs)("h2",{children:["O WhatsApp conecta ao seu telefone para sincronizar suas mensagens.",Object(O.jsx)("br",{}),"Para reduzir o uso de dados, conecte seu telefone a uma rede Wi-Fi."]})]})},N=a(51),y=a.n(N),k=a(52),C=a.n(k),E=(a(89),a(90),function(e){var t=e.user,a=e.data,c=Object(n.useState)(""),r=Object(l.a)(c,2),s=r[0],i=r[1];return Object(n.useEffect)((function(){if(a.date>0){var e=new Date(1e3*a.date.seconds),t=e.getHours(),n=e.getMinutes();n=n<10?"0"+n:n,i("".concat(t=t<10?"0"+t:t,":").concat(n))}}),[a]),Object(O.jsx)("div",{className:"messageLine",style:{justifyContent:t.id===a.author?"flex-end":"flex-start"},children:Object(O.jsxs)("div",{className:"messageItem",style:{backgroundColor:t.id===a.author?"#DCF8C6":"#FFF"},children:[Object(O.jsx)("div",{className:"messageText",children:a.body}),Object(O.jsx)("div",{className:"messageDate",children:s})]})})}),I=a(42),W=a.n(I),S=a(54),F=a.n(S),P=a(43),D=a.n(P),L=a(56),M=a.n(L),A=a(57),B=a.n(A),H=a(55),T=a.n(H),U=a(60),R=a.n(U),z=a(59),G=a.n(z),Y=a(58),K=a.n(Y),J=function(e){var t=e.user,a=e.data,c=Object(n.useRef)(),r=null,s=window.SpeechRecognition||window.webkitSpeechRecognition;void 0!==s&&(r=new s);var i=Object(n.useState)(!1),o=Object(l.a)(i,2),u=o[0],d=o[1],h=Object(n.useState)(!1),j=Object(l.a)(h,2),f=j[0],b=j[1],m=Object(n.useState)(""),x=Object(l.a)(m,2),w=x[0],g=x[1],N=Object(n.useState)(!1),k=Object(l.a)(N,2),I=k[0],S=k[1],P=Object(n.useState)([]),L=Object(l.a)(P,2),A=L[0],H=L[1],U=Object(n.useState)([]),z=Object(l.a)(U,2),Y=z[0],J=z[1];Object(n.useEffect)((function(){return H([]),p.onChatContent(a.chatId,H,J)}),[a.chatId]),Object(n.useEffect)((function(){c.current.scrollHeight>c.current.offsetHeight&&(c.current.scrollTop=c.current.scrollHeight-c.current.offsetHeight)}),[A]);var V=function(){""!==w&&(p.sendMessage(a,t.id,"text",w,Y),g(""),b(!1))};return Object(O.jsxs)("div",{className:"chatWindow",children:[Object(O.jsxs)("div",{className:"chatWindow--header",children:[Object(O.jsxs)("div",{className:"chatWindow--headerinfo",children:[Object(O.jsx)("img",{src:a.image,alt:"",onClick:function(){v.a.fire({title:a.title,imageUrl:a.image,imageWidth:400,imageHeight:200,imageAlt:"Custom image"})},className:"chatWindow--avatar"}),Object(O.jsx)("div",{className:"chatWindow--name",children:a.title})]}),Object(O.jsxs)("div",{className:"chatWindow--headerbuttons",children:[Object(O.jsx)("div",{className:"chatWindow--btn",children:Object(O.jsx)(W.a,{style:{color:"#919191"}})}),Object(O.jsx)("div",{className:"chatWindow--btn",children:Object(O.jsx)(F.a,{style:{color:"#919191"}})}),Object(O.jsx)("div",{className:"chatWindow--btn",children:Object(O.jsx)(D.a,{style:{color:"#919191"}})})]})]}),Object(O.jsx)("div",{ref:c,className:"chatWindow--body",children:A.map((function(e,a){return Object(O.jsx)(E,{data:e,user:t},a)}))}),Object(O.jsx)("div",{className:"chatWindow--emojiarea",style:{height:f?"200px":"0px"},children:Object(O.jsx)(y.a,{onEmojiClick:function(e,t){g(w+t.emoji)},disableSearchBar:!0,disableSkinTonePicker:!0})}),Object(O.jsx)("div",{className:"chatWindow--gifarea",style:{height:u?"200px":"0px"},children:Object(O.jsx)(C.a,{api_key:"wE42l5Au3DRu5K7ciJpHYXHdagmroGzN",borderRadius:0,columns:4,open:u,onClose:function(){return d(!1)},onGifClick:function(e,t){console.log(e),g(w+e.url)},onPickClose:!1,topBarColor:"#4ADF83"})}),Object(O.jsxs)("div",{className:"chatWindow--footer",children:[Object(O.jsxs)("div",{className:"chatWindow--pre",children:[Object(O.jsx)("div",{className:"chatWindow--btn",onClick:function(){b(!1)},style:{width:f?40:0},children:Object(O.jsx)(T.a,{style:{color:"#919191"}})}),Object(O.jsx)("div",{className:"chatWindow--btn",onClick:function(){b(!0)},children:Object(O.jsx)(M.a,{style:{color:f?"#009688":"#919191"}})}),Object(O.jsx)("div",{className:"chatWindow--btn",children:Object(O.jsx)(B.a,{onClick:function(){return d(!0)},style:{color:u?"#009688":"#919191"}})}),Object(O.jsx)("div",{className:"chatWindow--btn",children:Object(O.jsx)(K.a,{style:{color:"#919191"}})})]}),Object(O.jsx)("div",{className:"chatWindow--inputarea",children:Object(O.jsx)("input",{className:"chatWindow--input",type:"text",placeholder:"Digite uma mensagem",value:w,onChange:function(e){return g(e.target.value)},onKeyUp:function(e){13==e.keyCode&&V()}})}),Object(O.jsxs)("div",{className:"chatWindow--pos",children:[""===w&&Object(O.jsx)("div",{className:"chatWindow--btn",children:Object(O.jsx)(G.a,{onClick:function(){null!==r&&(r.onstart=function(){S(!0)},r.onend=function(){S(!1)},r.onresult=function(e){g(e.results[0][0].transcript)},r.start())},style:{color:I?"#126ECE":"#919191"}})}),""!==w&&Object(O.jsx)("div",{onClick:V,className:"chatWindow--btn",children:Object(O.jsx)(R.a,{style:{color:"#919191"}})})]})]})]})},V=(a(96),a(61)),Q=a.n(V),X=function(e){var t=e.user,a=(e.chatlist,e.show),c=e.setShow,r=Object(n.useState)([]),s=Object(l.a)(r,2),i=s[0],d=s[1];Object(n.useEffect)((function(){(function(){var e=Object(u.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t){e.next=5;break}return e.next=3,p.getContactList(t.id);case 3:a=e.sent,d(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t]);var h=function(){var e=Object(u.a)(o.a.mark((function e(a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.addNewChat(t,a);case 2:v.a.fire({title:"Sucesso!",text:"Conversa criada com Sucesso",icon:"success",confirmButtonText:"confirmar"}),j();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){c(!1)};return Object(O.jsxs)("div",{className:"newChat",style:{left:a?0:-415},children:[Object(O.jsxs)("div",{className:"newChat--head",children:[Object(O.jsx)("div",{onClick:j,className:"newChat--backButton",children:Object(O.jsx)(Q.a,{style:{color:"#FFF"}})}),Object(O.jsx)("div",{className:"newChat--headtitle",children:"Nova Conversa"})]}),Object(O.jsx)("div",{className:"newChat--list",children:i.map((function(e,t){return Object(O.jsxs)("div",{onClick:function(){return h(e)},className:"newChat--item",children:[Object(O.jsx)("img",{className:"newChat--itemavatar",src:e.avatar,alt:""}),Object(O.jsx)("div",{className:"newChat--itemname",children:e.name})]},t)}))})]})},Z=a(45),_=a.n(Z),q=function(e){var t=e.onReceive;_()(window).on("load",(function(){_()(".loader").fadeOut(),_()("#preloder").delay(400).fadeOut("slow")}));var a=function(){var e=Object(u.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.fbPopup();case 2:(a=e.sent)?t(a.user):alert("Erro!");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n=function(){var e=Object(u.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.gitPopup();case 2:(a=e.sent)?t(a.user):alert("Erro!");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=Object(u.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.googlePopup();case 2:(a=e.sent)?t(a.user):alert("Erro!");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r=function(){var e=Object(u.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.twitterPopup();case 2:(a=e.sent)?t(a.user):alert("Erro!");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(u.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.YahooLogin();case 2:(a=e.sent)?t(a.user):alert("Erro!");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:"Geral",children:[Object(O.jsx)("div",{id:"preloder",children:Object(O.jsx)("div",{className:"loader"})}),Object(O.jsxs)("div",{className:"icon",children:[Object(O.jsx)("a",{onClick:a,style:{cursor:"pointer"},className:"fab fa-facebook"}),Object(O.jsx)("a",{onClick:n,style:{cursor:"pointer"},className:"fab fa-github"}),Object(O.jsx)("a",{onClick:c,style:{cursor:"pointer"},className:"fab fa-google"}),Object(O.jsx)("a",{onClick:r,style:{cursor:"pointer"},className:"fab fa-twitter"}),Object(O.jsx)("a",{onClick:s,style:{cursor:"pointer"},className:"fab fa-yahoo"})]})]})},$=a(63),ee=a.n($),te=a(64),ae=a.n(te),ne=a(62),ce=a.n(ne),re=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)({}),s=Object(l.a)(r,2),i=s[0],d=s[1],h=Object(n.useState)(null),j=Object(l.a)(h,2),f=j[0],b=j[1],m=Object(n.useState)(!1),w=Object(l.a)(m,2),N=w[0],y=w[1],k=Object(n.useState)(!1),C=Object(l.a)(k,2),E=C[0],I=C[1];Object(n.useEffect)((function(){if(null!==f)return p.onChatList(f.id,c)}),[f]);Object(n.useEffect)((function(){document.getElementById("colors").innerHTML="\n    :root{\n      --main-color: ".concat(E?"#000":"#d2dbdc",";\n      --secondary-color:").concat(E?"#2c2c2c":"#EDEDED",";\n      --tertiary-color:").concat(E?"#191e1e":"#DDD",";\n      --other-color:").concat(E?"#222222":"#F6F6F6",";\n      --other-color2:").concat(E?"#282828":"#EEE",";\n      --other-color3:").concat(E?"#121212":"#fff",";\n      --other-color4: ").concat(E?"#1f2021":"#F8F9FA",";\n      --other-color5: ").concat(E?"#FFF":"#000",";\n      --other-color6: ").concat(E?"#222222":"#F5F5F5",";\n      --other-color7: ").concat(E?"#282828":"#EEE",";\n      --other-color8: ").concat(E?"#2a2a2a":"#EBEBEB",";\n      --other-color9: ").concat(E?"#b9b9b9":"#525252",";\n      --background: ").concat(E?"url(https://cdn.discordapp.com/attachments/870357586673815602/908329671815475210/darktheme.png)":"url(https://user-images.githubusercontent.com/15075759/28719144-86dc0f70-73b1-11e7-911d-60d70fcded21.png)",";\n    } \n    ")}),[E]);var S=function(){var e=Object(u.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:function(e){e.addEventListener("mouseenter",v.a.stopTimer),e.addEventListener("mouseleave",v.a.resumeTimer)}}).fire({icon:"success",title:"Logado com successo!"}),a={id:t.uid,name:t.displayName,avatar:t.photoURL},e.next=4,p.addUser(a);case 4:b(a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return null===f?Object(O.jsx)(q,{onReceive:S}):Object(O.jsxs)("div",{className:"app-window",children:[Object(O.jsxs)("div",{className:"sidebar",children:[Object(O.jsx)(X,{chatlist:a,user:f,show:N,setShow:y}),Object(O.jsxs)("header",{children:[Object(O.jsx)("img",{className:"header--avatar",onClick:function(){v.a.fire({title:f.name,text:"Sua foto de perfil!",imageUrl:f.avatar,imageWidth:400,imageHeight:200,imageAlt:"Custom image"})},src:f.avatar,alt:""}),Object(O.jsxs)("div",{className:"header--buttons",children:[Object(O.jsx)("div",{onClick:function(){I(!E)},className:"header--btn",children:Object(O.jsx)(ce.a,{style:{color:"#919191"}})}),Object(O.jsx)("div",{className:"header--btn",children:Object(O.jsx)(ee.a,{style:{color:"#919191"}})}),Object(O.jsx)("div",{onClick:function(){y(!0)},className:"header--btn",children:Object(O.jsx)(ae.a,{style:{color:"#919191"}})}),Object(O.jsx)("div",{className:"header--btn",children:Object(O.jsx)(D.a,{style:{color:"#919191"}})})]})]}),Object(O.jsx)("div",{className:"search",children:Object(O.jsxs)("div",{className:"search--input",children:[Object(O.jsx)(W.a,{fontSize:"small",style:{color:"#919191"}}),Object(O.jsx)("input",{type:"search",placeholder:"Procurar ou come\xe7ar uma nova conversa"})]})}),Object(O.jsx)("div",{className:"chatlist",children:a.map((function(e,t){return Object(O.jsx)(x,{data:e,active:i.chatId===a[t].chatId,onClick:function(){return d(a[t])}},t)}))})]}),Object(O.jsxs)("div",{className:"contentarea",children:[void 0!==i.chatId&&Object(O.jsx)(J,{user:f,data:i}),void 0===i.chatId&&Object(O.jsx)(g,{})]})]})};s.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(re,{})}),document.getElementById("root"))}},[[98,1,2]]]);
//# sourceMappingURL=main.6f71f875.chunk.js.map